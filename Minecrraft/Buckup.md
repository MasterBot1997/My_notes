
Создание резервной копии (backup) сервера Minecraft — важная процедура, которая позволяет сохранить весь прогресс, миры, конфигурации и данные вашего сервера на случай ошибок, сбоев или потери данных. Это особенно полезно, если вы собираетесь вносить изменения, обновлять сервер или устанавливать плагины. Вот несколько способов, как сделать backup вашего Minecraft-сервера:

### 1. **Ручное создание резервной копии**

Самый простой способ создания резервной копии — это вручную скопировать папки сервера.

#### Шаги:

1. **Остановите сервер**: Для корректного копирования данных важно остановить сервер, чтобы все данные были сохранены должным образом.
    
    - Если вы используете командную строку, введите: `stop`
    - Дождитесь завершения процесса остановки сервера.

1. **Найдите папку сервера**: Обычно это та папка, где находятся файлы Minecraft, включая `server.jar` и папку **world** (или другие миры, если у вас несколько).
    
2. **Скопируйте папки сервера**:
    
    - Скопируйте все содержимое папки сервера или, по крайней мере, следующие важные папки:
        - **world** (и другие папки с мирами, если есть, например, `world_nether`, `world_the_end`)
        - **plugins** (если вы используете плагины)
        - **server.properties** (файл конфигурации сервера)
        - **ops.json**, **whitelist.json**, **banned-players.json** (данные игроков)
        - **config** (если она существует, для хранения конфигураций плагинов или модов)
    
    Скопируйте эти папки в другое место на вашем компьютере или сервере.
    
3. **Сжать папку в архив** (по желанию):
    
    - Для экономии места можно сжать копию в архив **ZIP** или **RAR**. Это уменьшит размер резервной копии и упростит хранение.
4. **Перезапустите сервер**:
    
    - После создания резервной копии вы можете снова запустить сервер.

### 2. **Автоматическое создание резервной копии**

Для автоматизации процесса резервного копирования можно использовать скрипты или специализированные плагины.

#### A. **Создание резервной копии с помощью скрипта (для Linux/Windows)**

##### **Linux (bash-скрипт)**:

Вы можете создать bash-скрипт, который автоматически остановит сервер, создаст резервную копию, а затем снова запустит его.

1. Создайте скрипт, используя текстовый редактор:
```
nano backup.sh
```
2. Вставьте в скрипт следующий код:
```
#!/bin/bash

# Дата и время для названия резервной копии
BACKUP_DATE=$(date +"%Y-%m-%d_%H-%M-%S")

# Папка сервера и куда будет сохранен бэкап
SERVER_DIR="/path/to/minecraft-server"
BACKUP_DIR="/path/to/backups"

# Имя сессии tmux, в которой запущен сервер
TMUX_SESSION="minecraft"

# Сообщение игрокам о начале резервного копирования
tmux send-keys -t $TMUX_SESSION "say Server is backing up, expect some lag..." ENTER

# Сохранение всех данных на диск
tmux send-keys -t $TMUX_SESSION "save-all" ENTER
tmux send-keys -t $TMUX_SESSION "save-off" ENTER

# Копирование файлов мира в архив
tar -czvf $BACKUP_DIR/minecraft-backup-$BACKUP_DATE.tar.gz $SERVER_DIR

# Включение автоматического сохранения данных
tmux send-keys -t $TMUX_SESSION "save-on" ENTER

# Уведомление игроков о завершении резервного копирования
tmux send-keys -t $TMUX_SESSION "say Backup completed!" ENTER

```

3. Сделайте скрипт исполняемым: `chmod +x backup.sh`
4. Запустите скрипт вручную: `./backup.sh`
5. Для автоматизации можно добавить задание в **cron**: `crontab -e`
6. Добавьте строку для выполнения бэкапа каждый день в 3 часа ночи: `0 3 * * * /path/to/backup.sh`
