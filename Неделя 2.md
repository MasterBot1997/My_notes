
---

### Web-stack


| Тема                                      | Что должен уметь                                                                | Ответы                                                                                                                                                                                                                                                                                                                                   | Полезные ссылки                                                                                                                                                         |
| ----------------------------------------- | ------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Веб-севрера  <br>NGINX-APACHE-PHP-FPM** | nginx -t                                                                        | Команда для проверки корректности конфигурационных файлов, после внесения изменений в конфиги важно ее выполнять, иначе поляжет веб-сервер                                                                                                                                                                                               | Здесь, конечно, не Nginx, но HAProxy (в готовом решении BBB):  <br>[https://hp.beget.ru/ticket/2212906/post-13418853](https://hp.beget.ru/ticket/2212906/post-13418853) |
|                                           | apachectl -t                                                                    | Команда для проверки корректности конфигурационных файлов, после внесения изменений в конфиги важно ее выполнять, иначе поляжет веб-сервер<br><br>Есть ключи:<br>- **`apachectl -t -D DUMP_VHOSTS`** — показывает список настроенных виртуальных хостов.<br>- **`apachectl -t -D DUMP_MODULES`** — отображает загруженные модули Apache. | [https://hp.beget.ru/ticket/2268249/post-13822546](https://hp.beget.ru/ticket/2268249/post-13822546)                                                                    |
|                                           | apachectl configtest                                                            | Аналогично apachectl -t но как будто нет ключей для отдельных проверок                                                                                                                                                                                                                                                                   |                                                                                                                                                                         |
|                                           | Нахождение конфигов                                                             | По дефолту конфиги `apache` - `/etc/[apache\|httpd]/`<br>`Nginx` - `/etc/nginx`<br><br>**Linux**: `/etc/php/{версия}/apache2/php.ini` (если используется Apache) или `/etc/php/{версия}/fpm/php.ini` (если используется PHP-FPM для Nginx).                                                                                              |                                                                                                                                                                         |
|                                           | Нахождение логов                                                                |                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                         |
|                                           | Настройка проксирования                                                         |                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                         |
|                                           | Чтение конфигурации                                                             |                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                         |
|                                           | Знаю как с помощью lsof найти куда пишутся логи веб-севрера                     |                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                         |
|                                           | Подключение PHP slow logs                                                       |                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                         |
|                                           | Знаю из чего состоит BBB                                                        |                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                         |
|                                           | Знаю для чего может пригодиться директива php-fpm **request_terminate_timeout** |                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                         |

| **SSL** | certbot                                          |     | [SUPPORT:VPS:SSL:LETS ENCRYPT WILDCARD](https://support.beget.ru/questions/view?id=1766)                                                                                                                       |
| ------- | ------------------------------------------------ | --- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|         | certbot --dry-run                                |     | Установка ssl на готовое решение, которое развернуто в docker:<br><br>[https://hp.beget.ru/ticket/1970732/post-11852924](https://hp.beget.ru/ticket/1970732/post-11852924)                                     |
|         | Выпуск сертификатов от LE с помощью Certbot      |     | Перевыпуск серта BBB:<br><br>[https://hp.beget.ru/ticket/2395666/post-14586762](https://hp.beget.ru/ticket/2395666/post-14586762)                                                                              |
|         | Знаю виды челенджей                              |     | [SUPPORT:VPS:HESTIACP:ДЕЛЕГИРОВАНИЕ LETS ENCRYPT WILDCARD](https://support.beget.ru/questions/view?id=1784)                                                                                                    |
|         | Выпуск wildcard-сертификата в панелях управления |     | Не подхватывался уже установленный серт на панель<br><br>HestiaCP, которая работает на порту 8083:<br><br>[https://hp.beget.ru/ticket/2398162/post-14632147](https://hp.beget.ru/ticket/2398162/post-14632147) |


| **MySQL** | mysql                                                                        |     | Восстановление БД путем потабличного дампа:<br><br>[https://hp.beget.ru/ticket/2197176/post-13336496](https://hp.beget.ru/ticket/2197176/post-13336496) |
| --------- | ---------------------------------------------------------------------------- | --- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
|           | show full processlist                                                        |     |                                                                                                                                                         |
|           | \G                                                                           |     |                                                                                                                                                         |
|           | EXPLAIN                                                                      |     |                                                                                                                                                         |
|           | DESC / SHOW CREATE TABLE                                                     |     |                                                                                                                                                         |
|           | mysqlcheck, --auto-repair                                                    |     |                                                                                                                                                         |
|           | innodb_force_recovery                                                        |     |                                                                                                                                                         |
|           | mv /var/lib/mysql/                                                           |     |                                                                                                                                                         |
|           | #innodb_redo/* /tmp/                                                         |     |                                                                                                                                                         |
|           | Вывод списка текущих процессов                                               |     |                                                                                                                                                         |
|           | Выявление проблем с нагрузкой от БД                                          |     |                                                                                                                                                         |
|           | Выявление медленных запросы                                                  |     |                                                                                                                                                         |
|           | Установка/сброс пароля от root                                               |     |                                                                                                                                                         |
|           | Настройка wait_timeout, max_packet_size и др. параметров через конфиги mysql |     |                                                                                                                                                         |
|           | Настройка sql_mode                                                           |     |                                                                                                                                                         |
|           | Восстановление БД путем потабличного дампа                                   |     |                                                                                                                                                         |
|           | Умею восстанавливать поврежденные БД (несложные случаи)                      |     |                                                                                                                                                         |


---

### Сеть


| **SSH/SFTP + подключение sprutio** | ssh -v                                                                       |     | [Файловый менеджер для VPS](https://confluence.beget.ru/pages/viewpage.action?pageId=15041794)                                                                                                                                |
| ---------------------------------- | ---------------------------------------------------------------------------- | --- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                    | yii vps/show-system-info                                                     |     | [VPS. Файловый менеджер](https://confluence.beget.ru/pages/viewpage.action?pageId=21266652)                                                                                                                                   |
|                                    | /etc/ssh/sshd_config                                                         |     | [SUPPORT:2VPS:SUPPORT: ДОЛГО ОТКРЫВАЕТСЯ ФАЙЛОВЫЙ МЕНЕДЖЕР: ТОРМОЗИТ SSH:PAM_SYSTEMD(SSHD:SESSION): FAILED TO CREATE SESSION: CONNECTION TIMED OUT ДОЛГО ПОДКЛЮЧАЕТСЯ ПО SSH](https://support.beget.ru/questions/view?id=859) |
|                                    | DevTools для диагностики                                                     |     |                                                                                                                                                                                                                               |
|                                    | подключения ФМ                                                               |     |                                                                                                                                                                                                                               |
|                                    | fail2ban-client                                                              |     |                                                                                                                                                                                                                               |
|                                    | Знаю, где логи и конфиги                                                     |     |                                                                                                                                                                                                                               |
|                                    | Понимаю как подключается sprutio (какой IP искать в логах, как найти ошибку) |     |                                                                                                                                                                                                                               |
|                                    | Понимаю весь вывод в yii vps/show-system-info                                |     |                                                                                                                                                                                                                               |
|                                    | Подключение с vps-hack к нестандартному порту ssh                            |     |                                                                                                                                                                                                                               |
|                                    | Работа с Fail2Ban: посмотреть, разблокировать, добавить IP в исключения      |     |                                                                                                                                                                                                                               |
|                                    | Починить signature algorithm ssh-rsa not in PubkeyAcceptedAlgorithms         |     |                                                                                                                                                                                                                               |

|     | ss                                 |     | [Обход блокировки 80 и 443 портов на VPS](https://confluence.beget.ru/pages/viewpage.action?pageId=68171562)            |
| --- | ---------------------------------- | --- | ----------------------------------------------------------------------------------------------------------------------- |
|     | netstat                            |     | [SUPPORT:2VPS:81 444 ABUSE:ОБХОД БЛОКИРОВКИ 80 И 443 ПОРТОВ](https://support.beget.ru/questions/view?id=1363)           |
|     | telnet                             |     | Пример того как бороться с DDOS на VPS:<br><br>[https://hp.beget.ru/ticket/2215503](https://hp.beget.ru/ticket/2215503) |
|     | ufw                                |     |                                                                                                                         |
|     | firewall-cmd                       |     |                                                                                                                         |
|     | iptables                           |     |                                                                                                                         |
|     | Работа с IPtables                  |     |                                                                                                                         |
|     | Работа с UFW                       |     |                                                                                                                         |
|     | Работа с firewall-cmd              |     |                                                                                                                         |
|     | Знаю, как проверить открыт ли порт |     |                                                                                                                         |